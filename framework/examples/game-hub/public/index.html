<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ğŸ® Game Hub â€” Farm + Trivia + Match-3</title>
    <meta
      name="description"
      content="Unified Game Hub: Farm, Trivia (Solo & Duel), Match-3 with Leaderboard â€” Discord Activities Framework Demo"
    />
    <link rel="stylesheet" href="css/base.css" />
    <link rel="stylesheet" href="css/farm.css" />
    <link rel="stylesheet" href="css/trivia.css" />
    <link rel="stylesheet" href="css/match3.css" />
  </head>
  <body>
    <!-- â•â•â• Nav Arrows â•â•â• -->
    <button class="nav-arrow nav-left" id="nav-left">â€¹</button>
    <button class="nav-arrow nav-right" id="nav-right">â€º</button>

    <!-- â•â•â• Nav Dots â•â•â• -->
    <div class="nav-dots">
      <button class="nav-dot" id="nav-dot-trivia" title="Trivia">ğŸ§ </button>
      <button class="nav-dot active" id="nav-dot-farm" title="Farm">ğŸŒ±</button>
      <button class="nav-dot" id="nav-dot-match3" title="Match-3">ğŸ’</button>
    </div>

    <!-- â•â•â• Viewport â•â•â• -->
    <div class="viewport">
      <div class="screen-track" id="track">
        <!-- â”€â”€â”€â”€â”€â”€ TRIVIA SCREEN â”€â”€â”€â”€â”€â”€ -->
        <section class="screen" id="screen-trivia">
          <div class="screen-header">
            <h1>ğŸ§  Brain Blitz</h1>
            <div class="subtitle">Trivia â€” Solo & Duel</div>
          </div>

          <!-- Menu -->
          <div id="trivia-menu" class="card">
            <div class="trivia-modes">
              <button class="trivia-mode-btn" id="btn-trivia-solo">
                <span class="mode-icon">ğŸ¯</span>
                <span class="mode-label">Solo</span>
                <span class="mode-desc">5 questions, beat your best</span>
              </button>
              <button class="trivia-mode-btn" id="btn-trivia-create-duel">
                <span class="mode-icon">âš”ï¸</span>
                <span class="mode-label">Create Duel</span>
                <span class="mode-desc">Challenge a friend</span>
              </button>
              <button class="trivia-mode-btn" id="btn-trivia-join-duel">
                <span class="mode-icon">ğŸ¤</span>
                <span class="mode-label">Join Duel</span>
                <span class="mode-desc">Enter invite code</span>
              </button>
            </div>
          </div>

          <!-- Play (solo & duel) -->
          <div
            id="trivia-play"
            class="card trivia-question-card"
            style="display: none"
          >
            <div class="trivia-progress" id="trivia-progress"></div>
            <div class="trivia-score-live">
              <span>Score: <strong id="trivia-score-display">0</strong></span>
              <span id="trivia-streak-display"></span>
            </div>
            <div class="trivia-timer">
              <div class="trivia-timer-bar">
                <div class="trivia-timer-fill" id="trivia-timer-fill"></div>
              </div>
              <div class="trivia-timer-text" id="trivia-timer-text">15s</div>
            </div>
            <div class="trivia-category" id="trivia-category"></div>
            <div class="trivia-q-text" id="trivia-q-text"></div>
            <div class="trivia-answers" id="trivia-answers"></div>
          </div>

          <!-- Duel Create -->
          <div
            id="trivia-duel-create"
            class="card trivia-duel-panel"
            style="display: none"
          >
            <h2 style="font-size: 1.2rem; margin-bottom: 6px">
              âš”ï¸ Duel Created!
            </h2>
            <p class="text-dim" style="font-size: 0.8rem">
              Share this code with your opponent:
            </p>
            <div class="trivia-invite-code" id="duel-invite-code"></div>
            <button
              class="btn btn-secondary btn-sm"
              style="margin: 0 auto 12px; display: block"
              id="btn-duel-copy-code"
            >
              ğŸ“‹ Copy Code
            </button>
            <div class="trivia-duel-status">
              <span class="spinner">â³</span> Waiting for opponent...
            </div>
            <button
              class="btn btn-secondary btn-sm mt-12"
              id="btn-duel-create-back"
            >
              â† Back
            </button>
          </div>

          <!-- Duel Join -->
          <div
            id="trivia-duel-join"
            class="card trivia-duel-panel"
            style="display: none"
          >
            <h2 style="font-size: 1.2rem; margin-bottom: 12px">ğŸ¤ Join Duel</h2>
            <input
              class="trivia-duel-input"
              id="duel-join-input"
              placeholder="Enter invite code"
              maxlength="6"
            />
            <div style="display: flex; gap: 8px; margin-top: 12px">
              <button
                class="btn btn-primary btn-sm"
                style="flex: 1"
                id="btn-duel-join-submit"
              >
                Join
              </button>
              <button class="btn btn-secondary btn-sm" id="btn-duel-join-back">
                â† Back
              </button>
            </div>
          </div>

          <!-- Duel Wait -->
          <div
            id="trivia-duel-wait"
            class="card trivia-duel-panel"
            style="display: none"
          >
            <div class="trivia-duel-status">
              <span class="spinner">â³</span> Waiting for host to start...
            </div>
          </div>

          <!-- Results -->
          <div id="trivia-results" class="card" style="display: none">
            <h2 style="font-size: 1.3rem">ğŸ† Results</h2>
            <div class="trivia-results-score" id="trivia-final-score">0</div>
            <div id="trivia-results-extra"></div>
            <button class="btn btn-primary mt-16" id="btn-trivia-play-again">
              ğŸ”„ Play Again
            </button>
          </div>
        </section>

        <!-- â”€â”€â”€â”€â”€â”€ FARM SCREEN â”€â”€â”€â”€â”€â”€ -->
        <section class="screen" id="screen-farm">
          <div class="screen-header">
            <h1>ğŸŒ± Cozy Farm</h1>
            <div class="subtitle">Plant â€¢ Grow â€¢ Harvest</div>
          </div>

          <div class="stats-bar">
            <div class="stat">
              <div class="stat-value text-gold" id="farm-coins">200</div>
              <div class="stat-label">Coins</div>
            </div>
            <div class="stat">
              <div class="stat-value text-accent" id="farm-xp">0</div>
              <div class="stat-label">XP</div>
            </div>
            <div class="stat">
              <div class="stat-value text-success" id="farm-level">Lv1</div>
              <div class="stat-label">Level</div>
            </div>
          </div>

          <div class="farm-plots" id="farm-plots"></div>

          <div class="farm-shop">
            <div class="farm-shop-title">
              ğŸŒ¾ Seed Shop
              <span
                class="text-dim"
                style="font-size: 0.65rem; font-weight: 400"
                >â€” click to select, right-click to buy</span
              >
            </div>
            <div class="farm-shop-grid" id="farm-shop-grid"></div>
            <button class="btn btn-primary btn-sm mt-12" id="farm-buy-btn">
              Buy Selected Seeds
            </button>
          </div>
        </section>

        <!-- â”€â”€â”€â”€â”€â”€ MATCH-3 SCREEN â”€â”€â”€â”€â”€â”€ -->
        <section class="screen" id="screen-match3">
          <div class="screen-header">
            <h1>ğŸ’ Gem Crush</h1>
            <div class="subtitle">Match-3 Puzzle</div>
          </div>

          <div class="stats-bar">
            <div class="stat">
              <div class="stat-value text-gold" id="m3-score">0</div>
              <div class="stat-label">Score</div>
            </div>
            <div class="stat">
              <div class="stat-value" style="color: #60a5fa" id="m3-moves">
                30
              </div>
              <div class="stat-label">Moves</div>
            </div>
            <div class="stat">
              <div class="stat-value" style="color: #f472b6" id="m3-combo">
                â€”
              </div>
              <div class="stat-label">Combo</div>
            </div>
            <div class="stat">
              <div class="stat-value text-accent" id="m3-best">0</div>
              <div class="stat-label">Best</div>
            </div>
          </div>

          <div class="m3-board-container" id="m3-board-container">
            <div class="m3-board" id="m3-board"></div>
            <div class="m3-combo-banner" id="m3-combo-banner"></div>
          </div>

          <div style="display: flex; gap: 10px; margin-top: 16px">
            <button class="btn btn-primary" id="m3-btn-start">
              ğŸ® New Game
            </button>
            <button class="btn btn-secondary" id="m3-btn-lb">
              ğŸ† Leaderboard
            </button>
          </div>

          <!-- Game Over Overlay -->
          <div class="overlay" id="m3-overlay">
            <div class="overlay-card">
              <h2>ğŸ† Game Over</h2>
              <div
                style="
                  font-size: 2.5rem;
                  font-weight: 900;
                  color: var(--gold);
                  margin: 10px 0;
                "
                id="m3-final-score"
              >
                0
              </div>
              <div
                style="
                  font-size: 0.85rem;
                  color: var(--text-dim);
                  margin-bottom: 20px;
                "
              >
                Best: <strong class="text-accent" id="m3-final-best">0</strong>
              </div>
              <button class="btn btn-primary" id="btn-m3-play-again">
                ğŸ”„ Play Again
              </button>
            </div>
          </div>

          <!-- Leaderboard Panel -->
          <div class="card m3-lb-panel" id="m3-lb-panel" style="display: none">
            <div class="m3-lb-tabs">
              <button class="m3-lb-tab active" id="btn-lb-tab-all">
                ğŸŒ All Players
              </button>
              <button class="m3-lb-tab" id="btn-lb-tab-room">
                ğŸ™ï¸ Voice Channel
              </button>
            </div>
            <table class="m3-lb-table">
              <thead>
                <tr>
                  <th>Rank</th>
                  <th>Player</th>
                  <th style="text-align: right">Score</th>
                </tr>
              </thead>
              <tbody id="m3-lb-body">
                <tr>
                  <td colspan="3" class="m3-lb-empty">No scores yet ğŸ†</td>
                </tr>
              </tbody>
            </table>
          </div>
        </section>
      </div>
      <!-- /screen-track -->
    </div>
    <!-- /viewport -->

    <!-- â•â•â• Scripts (order matters) â•â•â• -->
    <script src="/api/config.js"></script>
    <script src="js/discord-sdk.js"></script>
    <script src="js/shared.js"></script>
    <script src="js/farm.js"></script>
    <script src="js/trivia.js"></script>
    <script src="js/match3.js"></script>
  </body>
</html>
